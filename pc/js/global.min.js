jQuery.extend(jQuery.easing, {
    def: "easeOutQuad",
    swing: function(e, f, a, h, g) {
        return jQuery.easing[jQuery.easing.def](e, f, a, h, g);
    },
    easeInQuad: function(e, f, a, h, g) {
        return h * (f /= g) * f + a;
    },
    easeOutQuad: function(e, f, a, h, g) {
        return -h * (f /= g) * (f - 2) + a;
    },
    easeInExpo: function(e, f, a, h, g) {
        return (f == 0) ? a : h * Math.pow(2, 10 * (f / g - 1)) + a;
    },
    easeOutExpo: function(e, f, a, h, g) {
        return (f == g) ? a + h : h * (-Math.pow(2, -10 * f / g) + 1) + a;
    },
    easeInBack: function(e, f, a, i, h, g) {
        if (g == undefined) {
            g = 1.70158;
        }
        return i * (f /= h) * f * ((g + 1) * f - g) + a;
    },
    easeOutBack: function(e, f, a, i, h, g) {
        if (g == undefined) {
            g = 1.70158;
        }
        return i * ((f = f / h - 1) * f * ((g + 1) * f + g) + 1) + a;
    },
    easeInOutBack: function(e, f, a, i, h, g) {
        if (g == undefined) {
            g = 1.70158;
        }
        if ((f /= h / 2) < 1) {
            return i / 2 * (f * f * (((g *= (1.525)) + 1) * f - g)) + a;
        }
        return i / 2 * ((f -= 2) * f * (((g *= (1.525)) + 1) * f + g) + 2) + a;
    },
    easeOutBounce: function(j, i, b, c, d) {
        if ((i /= d) < (1 / 2.75)) {
            return c * (7.5625 * i * i) + b;
        } else {
            if (i < (2 / 2.75)) {
                return c * (7.5625 * (i -= (1.5 / 2.75)) * i + 0.75) + b;
            } else {
                if (i < (2.5 / 2.75)) {
                    return c * (7.5625 * (i -= (2.25 / 2.75)) * i + 0.9375) + b;
                } else {
                    return c * (7.5625 * (i -= (2.625 / 2.75)) * i + 0.984375) + b;
                }
            }
        }
    }
});
(function(a) {
    a.fn.menuAim = function(c) {
        this.each(function() {
            b.call(this, c);
        });
        return this;
    };

    function b(c) {
        var d = a(this),
            q = null,
            g = [],
            r = null,
            p = null,
            s = a.extend({
                rowSelector: "> li",
                submenuSelector: "*",
                submenuDirection: "right",
                tolerance: 75,
                enter: a.noop,
                exit: a.noop,
                activate: a.noop,
                deactivate: a.noop,
                exitMenu: a.noop
            }, c);
        var j = 3,
            f = 300;
        var e = function(t) {
            g.push({
                x: t.pageX,
                y: t.pageY
            });
            if (g.length > j) {
                g.shift();
            }
        };
        var o = function() {
            if (p) {
                clearTimeout(p);
            }
            if (s.exitMenu(this)) {
                if (q) {
                    s.deactivate(q);
                }
                q = null;
            }
        };
        var l = function() {
                if (p) {
                    clearTimeout(p);
                }
                s.enter(this);
                h(this);
            },
            k = function() {
                s.exit(this);
            };
        var m = function() {
            i(this);
        };
        var i = function(t) {
            if (t.className.toLowerCase() == "current") {
                return;
            }
            if (q) {
                s.deactivate(q);
            }
            s.activate(t);
            q = t;
        };
        var h = function(u) {
            var t = n();
            if (t) {
                p = setTimeout(function() {
                    h(u);
                }, t);
            } else {
                i(u);
            }
        };
        var n = function() {
            if (!q || !a(q).is(s.submenuSelector)) {
                return 0;
            }
            var x = d.offset(),
                t = {
                    x: x.left,
                    y: x.top - s.tolerance
                },
                E = {
                    x: x.left + d.outerWidth(),
                    y: t.y
                },
                G = {
                    x: x.left,
                    y: x.top + d.outerHeight() + s.tolerance
                },
                y = {
                    x: x.left + d.outerWidth(),
                    y: G.y
                },
                z = g[g.length - 1],
                D = g[0];
            if (!z) {
                return 0;
            }
            if (!D) {
                D = z;
            }
            if (D.x < x.left || D.x > y.x || D.y < x.top || D.y > y.y) {
                return 0;
            }
            if (r && z.x == r.x && z.y == r.y) {
                return 0;
            }

            function A(I, H) {
                return (H.y - I.y) / (H.x - I.x);
            }
            var C = E,
                u = y;
            if (s.submenuDirection == "left") {
                C = G;
                u = t;
            } else {
                if (s.submenuDirection == "below") {
                    C = y;
                    u = G;
                } else {
                    if (s.submenuDirection == "above") {
                        C = t;
                        u = E;
                    }
                }
            }
            var v = A(z, C),
                B = A(z, u),
                F = A(D, C),
                w = A(D, u);
            if (v < F && B > w) {
                r = z;
                return f;
            }
            r = null;
            return 0;
        };
        d.mouseleave(o).find(s.rowSelector).mouseenter(l).mouseleave(k).click(m);
        a(document).mousemove(e);
    }
})(jQuery);
var $window = $(window);
var NALA = NALA || {};
(function(a) {
    NALA.check = {
        stopStr: /找小妹|找小姐|找学生|整形|学生妹|人流|不孕不育|[发發髮]\s*票|[发發髮]\S+票/g,
        isPhone: function() {
            var b = navigator.userAgent.toLowerCase(),
                c = /iPhone|iPad|Android|ucweb|windows\s+mobile|Windows\s+Phone/i;
            return c.test(b);
        },
        isIE6: window.VBArray && !window.XMLHttpRequest,
        isNick: function(c) {
            var b = /^[\u4e00-\u9fa5A-Za-z0-9-_]+$/;
            return b.test(c);
        },
        isEmail: function(c) {
            var b = /^[a-z0-9][\w\.]*@([a-z0-9][a-z0-9-]*\.)+[a-z]{2,5}$/i;
            return b.test(c);
        },
        isMobile: function(c) {
            var b = /^1[345678][0-9]{9}$/;
            return b.test(c);
        },
        isTelephone: function(c) {
            var b = /^0\d{2,3}-\d{5,9}$/;
            return b.test(c);
        },
        isUrl: function(c) {
            var b = /^http:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?$/;
            return b.test(c);
        },
        isNum: function(c) {
            var b = /^[0-9]\d*$/;
            return b.test(c);
        }
    };
    if (NALA.check.isPhone()) {
        a("html").addClass("isPhone");
        NALA.isPhone = true;
    } else {
        if ($window.width() < 1400) {
            a("html").addClass("is1280");
        }
    }
    NALA.userInfo = {
        login: 0
    };
    NALA.common = {
        ajaxUrl: {
            userinfo: "/user/loginAuth3",
            cartData: "/cart/listJson",
            search: "/item/associateSearch"
        },
        cmsContentAjax: function(b, c) {
            a.ajax({
                url: "/common/ajaxCmsContent",
                cache: false,
                data: {
                    mark: b
                },
                dataType: "html",
                success: function(d) {
                    c(d);
                }
            });
        },
        searchBar: function() {
            var g = this,
                i = a("#search_fm"),
                f = i.find("input.sea_input"),
                b = {},
                j = null,
                e = -1;
            _offset = null, $result = null;
            i.submit(function() {
                if (a.trim(f.val()) == "请输入商品或品牌" || a.trim(f.val()) == "") {
                    location.href = "/item/newsearch";
                    return false;
                }
            });
            if (NALA.isPhone) {
                return;
            }
            $result = a('<div class="search_result"></div>').appendTo("body");
            f.attr("autocomplete", "off").on("focus", function() {
                var k = a.trim(f.val());
                _offset = f.offset();
                c();
                if (k == "") {
                    return false;
                }
                if (k == "请输入商品或品牌") {
                    f.val("");
                } else {
                    if (b[k] != undefined) {
                        d(k);
                    } else {
                        h(k);
                    }
                }
                return false;
            }).on("keyup", function(k) {
                if (k.keyCode != 40 && k.keyCode != 38 && k.keyCode != 13) {
                    clearTimeout(j);
                    j = setTimeout(function() {
                        var l = a.trim(f.val());
                        if (b[l] != undefined) {
                            d(l);
                        } else {
                            h(l);
                        }
                    }, 300);
                }
            }).blur(function() {
                if (a.trim(f.val()) == "") {
                    f.val("请输入商品或品牌");
                }
            }).on("keydown", function(n) {
                var k = $result.find("li"),
                    l = k.length,
                    m = "";
                if (l > 0) {
                    switch (n.keyCode) {
                        case 40:
                            e++;
                            if (e > l - 1) {
                                e = 0;
                            }
                            k.removeClass("on").eq(e).addClass("on");
                            f.val(k.eq(e).text());
                            break;
                        case 38:
                            e--;
                            if (e < 0) {
                                e = l - 1;
                            }
                            k.removeClass("on").eq(e).addClass("on");
                            f.val(k.eq(e).text());
                            break;
                    }
                }
            });

            function h(k) {
                a.ajax({
                    url: g.ajaxUrl.search,
                    data: {
                        q: k
                    },
                    success: function(l) {
                        b[k] = l;
                        d(k);
                    }
                });
            }

            function d(l) {
                var k = "<ul>",
                    m = b[l].split(",");
                if (m[0] !== "") {
                    a.each(m, function(o, n) {
                        k += "<li>" + n + "</li>";
                    });
                    $result.html(k).css({
                        left: _offset.left,
                        top: _offset.top,
                        display: "block"
                    });
                    e = -1;
                } else {
                    $result.hide();
                }
            }

            function c() {
                a(document).on("click", function(k) {
                    if (k.target.id != "textfield") {
                        $result.hide();
                    }
                });
                $result.on("mouseenter", "li", function() {
                    var k = a(this);
                    e = k.index();
                    k.addClass("on").siblings("li").removeClass("on");
                    return false;
                }).on("click", "li", function() {
                    f.val(a(this).text());
                    setTimeout(function() {
                        i.submit();
                    }, 300);
                });
            }
        },
        showLoginInfo: function() {
            var e = this,
                f = a("#userinfo-bar"),
                c = a("#hd_cartnum"),
                d = level = msgTxt = "";
            d = '<li class="more-menu" id="header_guanzhu"><a class="menu-link" href="javascript:;">关注我们：</a><i class="iconfont arrow">&#8193;</i><div class="more-bd"><div class="list"><p><iframe width="70" height="24" frameborder="0" allowtransparency="true" marginwidth="0" marginheight="0" scrolling="no" border="0" src="http://widget.weibo.com/relationship/followbutton.php?width=70&height=24&uid=5092874104&style=1&btn=red&dpc=1"></iframe></p></div></div></li>';
            a.ajax({
                url: e.ajaxUrl.userinfo,
                cache: false,
                dataType: "json",
                success: function(g) {
                    NALA.userInfo = g;
                    if (g.cart > 0) {
                        c.html(g.cart).css("visibility", "visible");
                    }
                    if (g.login) {
                        level = "";
                        if (g.level == 1) {
                            level = "vip-ico";
                        } else {
                            if (g.level == 2) {
                                level = "svip-ico";
                            }
                        }
                        d += '<li><a href="/user/myTrade" class="' + level + '">' + g.name + '</a>&nbsp;[<a href="/logout/ssoLogout">退出</a>]</li><li class="more-menu"><a class="menu-link" href="/user/myTrade">我的多美</a><i class="iconfont arrow">&#8193;</i><div class="more-bd"><div class="list"><a href="/user/myTrade">我的订单</a><a href="/integral/showMine">我的积分：' + g.jifen + '</a><a href="/account/mine">我的余额：￥' + (g.money / 100).toFixed(2) + '</a><a href="/coupon/queryMyCoupon">我的优惠券（' + g.coupon + '）</a><a href="/user/edit" class="last">修改个人资料</a></div></div></li>';
                    } else {
                        d += '<li class="first border"><a href="/login/auth">登录</a><s>|</s><a href="/user/reg">注册</a></li><li class="more-menu"><a class="menu-link" href="/user/myTrade">我的多美</a><i class="iconfont arrow">&#8193;</i><div class="more-bd"><div class="list"><a href="/user/myTrade">我的订单</a></li>';
                    }
                    f.html(d);
                    b();
                }
            });

            function b() {
                var g = null;
                f.on("mouseenter", "li.more-menu", function() {
                    var h = a(this);
                    g = setTimeout(function() {
                        h.addClass("hover");
                        g = null;
                    }, 300);
                }).on("mouseleave", "li.more-menu", function() {
                    var h = a(this);
                    if (g !== null) {
                        clearTimeout(g);
                    } else {
                        g = setTimeout(function() {
                            h.removeClass("hover");
                        }, 300);
                    }
                });
            }
        },
        toolBar: function() {
            var e = this,
                c = null,
                g = null,
                b = null,
                f = null,
                d = HTML = wideHTML = "";
            if (NALA.isPhone) {
                return;
            }
            HTML = '<div class="tb_box" id="J_toolbar"><ul class="tb_bd"><li><a href="http://wpa.qq.com/msgrd?v=3&uin=935895471&site=多美美妆&menu=yes" class="kefu" target="_blank"><p><img src="http://cdn.lizi.com/images/kong.gif" /><span>在线客服</span></p></a></li><li><a href="javascript:;" class="back2top"><p><img src="http://cdn.lizi.com/images/kong.gif" /><span>返回顶部</span></p></a></li></ul></div>';
            c = a(HTML).appendTo("body");
            c.on("click", "a.back2top", function() {
                a("body,html").animate({
                    scrollTop: 0
                }, 500);
                return false;
            });
        },
        head_cart_event: function() {
            var g = this,
                e = a("#head_cart"),
                b = e.find(".list"),
                f = null;
            e.on("mouseenter", function() {
                if (f !== null) {
                    clearTimeout(f);
                }
                f = setTimeout(function() {
                    e.addClass("hd_cart_hover");
                    if (e.data("loaded") !== "yes") {
                        d();
                    }
                }, 200);
            }).on("mouseleave", function() {
                if (f !== null) {
                    clearTimeout(f);
                }
                f = setTimeout(function() {
                    e.removeClass("hd_cart_hover");
                }, 200);
            });
            b.on("click", "a.del", function() {
                c(this);
            });

            function d() {
                a.ajax({
                    url: g.ajaxUrl.cartData,
                    type: "post",
                    dataType: "json",
                    success: function(j) {
                        var i = data_class = "";
                        if (j.status == 1) {
                            e.data("loaded", "yes");
                            a.each(j.data, function(l, k) {
                                var m = 0;
                                if (k.isTaoCan) {
                                    m = 1;
                                }
                                i += '<dl><dt><a target="_blank" href="/product-' + k.id + '.html"><img src="' + k.pic + '"></a></dt><dd><h4><a target="_blank" href="/product-' + k.id + '.html">' + k.name + '</a></h4><p><span class="red">￥' + k.price + "</span>&nbsp;<i>X</i>&nbsp;" + k.num + '</p><a class="iconfont del" title="删除" href="javascript:;" data-lid="' + k.l_id + '" data-taocan="' + m + '">&#x164;</a></dd></dl>';
                                if (l > 5) {
                                    data_class = " data_over";
                                }
                            });
                            i = '<div class="data' + data_class + '">' + i + '</div><div class="count">共<span class="red" id="hd_cart_count">' + j.count + '</span>件商品，满99元就包邮哦~<p>总价:<span class="red">￥<em id="hd_cart_total">' + j.total + '</em></span><a href="/cart/mycart" class="btn">去结算</a></p></div>';
                            b.html(i);
                            a("#hd_cartnum").html(j.count);
                        } else {
                            if (j.status == 0) {
                                h();
                            } else {
                                b.html('<p class="fail"><i class="iconfont">&#371;</i><br>购物车数据加载失败<br>请稍后再试</p>');
                            }
                        }
                    },
                    error: function(i) {
                        b.html('<p class="fail"><i class="iconfont">&#371;</i><br>购物车数据加载失败<br>请稍后再试 (' + i.status + ")</p>");
                    }
                });
            }

            function c(i) {
                var k = a(i),
                    j = k.data("lid");
                a.ajax({
                    url: "/cart/deleteBar",
                    type: "post",
                    dataType: "json",
                    data: {
                        idList: j
                    },
                    success: function(l) {
                        var m = l.totalCount;
                        a("#hd_cartnum").html(m);
                        if (m < 1) {
                            h();
                            return;
                        }
                        if (k.data("taocan") == 1) {
                            d();
                        } else {
                            k.parents("dl").remove();
                            a("#hd_cart_count").html(l.totalCount);
                            a("#hd_cart_total").html(l.totalPrice);
                            if (m < 7) {
                                b.find(".data").removeClass("data_over").css("zoom", "1");
                            }
                        }
                    },
                    error: function(l) {
                        NALA.dialog.warn("删除失败，请稍后再试 (" + l.status + ")");
                    }
                });
            }

            function h() {
                a("#hd_cartnum").css("visibility", "hidden");
                b.html('<p class="fail"><i class="iconfont">&#365;</i><br>购物车空啦<br>爱Ta，就带Ta来购物车吧</p>');
            }
        },
        mainNav_animate: function() {
            var h = this,
                b = a("#J_mainCata"),
                e = a("#J_subCata"),
                i = a("#main_nav"),
                l = null,
                k = null,
                d = false,
                g = false,
                f = false;
            if (a("#mall-slide").length > 0) {
                f = true;
            }
            b.find("ul").menuAim({
                activate: j,
                exitMenu: function() {
                    if (k !== null) {
                        clearTimeout(k);
                    }
                }
            });
            i.on("mouseenter", function() {
                var m = a(this);
                if (l !== null) {
                    clearTimeout(l);
                }
                if (f) {
                    return;
                }
                l = setTimeout(function() {
                    m.addClass("main_nav_hover");
                    b.stop().show().animate({
                        opacity: 1,
                        height: 398
                    }, 300);
                }, 200);
            }).on("mouseleave", function() {
                if (l !== null) {
                    clearTimeout(l);
                }
                l = setTimeout(function() {
                    e.css({
                        opacity: 0,
                        left: "100px"
                    }).find(".J_subView").hide();
                    g = false;
                    if (!f) {
                        b.stop().delay(200).animate({
                            opacity: 0,
                            height: 0
                        }, 300, function() {
                            i.removeClass("main_nav_hover");
                            b.hide().find("li").removeClass("current");
                        });
                    } else {
                        b.find("li").removeClass("current");
                    }
                }, 200);
            });

            function j(o) {
                var m = a(o),
                    n = m.index();
                if (n > 4) {
                    m.addClass("current").siblings("li").removeClass("current");
                    e.find(".J_subView").hide();
                    return false;
                }
                if (n > 1) {
                    e.css({
                        top: "198px"
                    });
                } else {
                    e.css({
                        top: "35px"
                    });
                } if (g) {
                    m.addClass("current").siblings("li").removeClass("current");
                    e.find(".J_subView").hide().eq(n).show();
                } else {
                    if (k !== null) {
                        clearTimeout(k);
                    }
                    k = setTimeout(function() {
                        m.addClass("current").siblings("li").removeClass("current");
                        g = true;
                        if (d) {
                            e.css({
                                opacity: 1,
                                left: "213px"
                            }).find(".J_subView").eq(n).show();
                        } else {
                            c(n);
                        }
                    }, 200);
                }
            }

            function c(m) {
                var n = function(o) {
                    e.html(o).css({
                        opacity: 1,
                        left: "213px"
                    }).find(".J_subView").eq(m).show();
                    d = true;
                };
                h.cmsContentAjax("lizi_catedata", n);
            }
        },
        fixedObj: {},
        fixed: function(b) {
            var f = this.fixedObj,
                g = b,
                d = g.attr("id") || "fixed_id",
                e = "",
                c = g.height();
            f[d + "_top"] = g.offset().top;
            f[d + "_fun"] = function() {
                var h = $window.scrollTop();
                if (h > f[d + "_top"]) {
                    if (g.hasClass("fixed")) {
                        return;
                    }
                    g.addClass("fixed");
                    if (NALA.check.isIE6) {
                        g.css({
                            position: "absolute"
                        });
                    } else {
                        g.css({
                            position: "fixed"
                        });
                    }
                } else {
                    g.removeClass("fixed");
                    g[0].style.position = "";
                }
            };
            if (NALA.check.isIE6) {
                e = g[0].style.cssText;
                g[0].style.cssText = e + ";_top:expression((document).documentElement.scrollTop);";
            }
            $window.on("scroll", f[d + "_fun"]);
        },
        lazyload: function() {
            var c = $window.height(),
                d = null,
                e = null;
            d = a("img").filter(function() {
                return a(this).attr("original") !== undefined;
            });

            function b() {
                var f = 0;
                if (d.length < 1) {
                    return;
                }
                f = $window.scrollTop();
                d.each(function() {
                    var i = a(this),
                        g = 0,
                        h = i.attr("original");
                    if (h === "") {
                        return;
                    }
                    g = i.offset().top;
                    if (g >= f - 200 && g <= (c + f + 50)) {
                        i.hide().attr("src", h).fadeIn();
                        i.attr("original", "");
                        i.error(function() {
                            this.src = "http://img.nala.com.cn/images/kong.gif";
                            i.addClass("img_error");
                        });
                    }
                });
                d = d.filter(function() {
                    return a(this).attr("original") !== "";
                });
            }
            b();
            $window.on("scroll", function() {
                if (e !== null) {
                    clearTimeout(e);
                }
                e = setTimeout(function() {
                    b();
                }, 50);
            });
        },
        cookie: function(c, k, n) {
            if (typeof k != "undefined") {
                n = n || {};
                if (k === null) {
                    k = "";
                    n.expires = -1;
                }
                var f = "";
                if (n.expires && (typeof n.expires == "number" || n.expires.toUTCString)) {
                    var g;
                    if (typeof n.expires == "number") {
                        g = new Date();
                        g.setTime(g.getTime() + (n.expires * 60 * 60 * 1000));
                    } else {
                        g = n.expires;
                    }
                    f = "; expires=" + g.toUTCString();
                }
                var m = n.path ? "; path=" + n.path : "; path=/";
                var h = n.domain ? "; domain=" + n.domain : "";
                var b = n.secure ? "; secure" : "";
                document.cookie = [c, "=", encodeURIComponent(k), f, m, h, b].join("");
            } else {
                var e = null;
                if (document.cookie && document.cookie != "") {
                    var l = document.cookie.split(";");
                    for (var j = 0; j < l.length; j++) {
                        var d = jQuery.trim(l[j]);
                        if (d.substring(0, c.length + 1) == (c + "=")) {
                            e = decodeURIComponent(d.substring(c.length + 1));
                            break;
                        }
                    }
                }
                return e;
            }
        },
        timeJson: function(c) {
            var b = {};
            b.secs = Math.floor(c % 60);
            b.mins = Math.floor(c / 60 % 60);
            b.hours = Math.floor(c / 60 / 60);
            b.days = 0;
            if (b.hours > 23) {
                b.days = Math.floor(b.hours / 24);
                b.hours = b.hours - b.days * 24;
            }
            if (b.secs < 10) {
                b.secs = "0" + b.secs;
            }
            if (b.mins < 10) {
                b.mins = "0" + b.mins;
            }
            if (b.hours < 10) {
                b.hours = "0" + b.hours;
            }
            if (b.days < 10) {
                b.days = "0" + b.days;
            }
            return b;
        }
    };
    NALA.dialog = {
        close: function(d) {
            var b, c = a.dialog.list;
            if (d) {
                c[d].close();
            } else {
                for (b in c) {
                    c[b].close();
                }
            }
        },
        creat: function(b) {
            var c = null;
            b = a.extend({
                fixed: true,
                title: false,
                lock: true,
                padding: "20px 40px",
                id: "",
                content: ""
            }, b);
            c = a.dialog(b);
            return c;
        },
        success: function(c, d) {
            var b = null;
            d = d || 2;
            this.close();
            c = '<div class="success-tip"><i class="iconfont">&#379;</i>' + c + "</div>";
            b = this.creat({
                id: "success",
                content: c,
                lock: false
            });
            setTimeout(function() {
                var e = a(b.DOM.wrap);
                e.animate({
                    top: "-=50px",
                    opacity: 0
                }, 300, "easeInBack", function() {
                    b.close();
                });
            }, d * 1000);
        },
        warn: function(c, d) {
            var b = null;
            c = '<div class="warn-tip"><i class="iconfont">&#227;</i>' + c + "</div>";
            b = this.creat({
                id: "warn",
                content: c
            });
            b.button({
                name: "知道了",
                focus: true,
                callback: d
            });
        },
        ok: function(c, d) {
            var b = null;
            c = '<div class="ok-tip"><i class="iconfont">&#379;</i>' + c + "</div>";
            b = this.creat({
                id: "ok",
                content: c
            });
            b.button({
                name: "知道了",
                focus: true,
                callback: d
            });
        },
        confirm: function(c, d) {
            var b = null;
            c = '<div class="confirm-tip"><i class="iconfont">&#228;</i>' + c + "</div>";
            b = this.creat({
                id: "confirm",
                content: c
            });
            b.button({
                name: "确定",
                focus: true,
                callback: d
            }, {
                name: "取消"
            });
        },
        showLogin: function(e) {
            var b = null,
                e = e || location.href,
                c = '<div class="dialog_login_box"><div id="login-box"><h2><div class="trig">没有帐号？<a href="/user/reg" target="_blank" class="trigger-box">点击注册</a></div>登录</h2><div class="form-bd"><div class="form_box cle" id="login-nala"><div class="login_box"><form id="login-nala-form"><ul class="form"><li class="text_input"><span class="error_icon"></span><span class="iconfont">&#338;</span><input type="text" name="j_username" class="text" placeholder="用户名/邮箱/手机号"></li><li class="text_input"><span class="error_icon"></span><span class="iconfont">&#247;</span><input type="password" name="j_password" class="text" placeholder="密码"></li><li class="error_box"><em></em></li><li class="login_param"><p><a class="forget_psd" target="_blank" href="/user/resetPwd">忘记密码?</a><label><input type="checkbox" checked="checked" name="_spring_security_remember_me" class="remember-me">下次自动登录</label></p></li><li class="last"><input type="submit" class="btn" value="登 录" /></li></ul></form></div></div></div><ul class="form other-form"><li><h5>使用第三方帐号登录</h5></li><li class="other-login"><a class="sina" target="_blank" href="https://api.weibo.com/oauth2/authorize?client_id=1062800511&response_type=code&redirect_uri=http://www.lizi.com/user/sinaLogin"></a><a class="qq" target="_blank" href="https://graph.qq.com/oauth2.0/authorize?response_type=code&amp;client_id=100224827&amp;state=1&amp;redirect_uri=www.lizi.com/user/qqLoginCallback"></a><a class="alipay" target="_blank" href="http://www.lizi.com/user/alipayLogin"></a><a class="taobao" target="_blank" id="tb-login" href="http://www.lizi.com/user/taobaoLogin"></a><a class="baidu" target="_blank" href="http://www.lizi.com/user/baiduLogin?login=baidu"></a><a class="qihoo360" target="_blank" href="https://openapi.360.cn/oauth2/authorize?client_id=6550d4a07c17ee81e0737a4203d5848c&response_type=code&redirect_uri=http://www.lizi.com/user/qihooCallBack&scope=basic&display=default"></a></li></ul></div></div>';
            if (NALA.isPhone) {
                location.href = "/login/auth";
                return;
            }
            b = a.dialog({
                title: "您尚未登录",
                lock: true,
                fixed: true,
                padding: "0",
                id: "login",
                content: c,
                init: function() {
                    var g = a("#login-nala-form"),
                        k = g.find("input[name=j_username]"),
                        j = g.find("input[name=j_password]"),
                        i = g.find("input[type=submit]"),
                        f = g.find("li.error_box em"),
                        h = g.find("li.text_input");
                    g.find("input").focus(function() {
                        h.removeClass("params_error");
                    });
                    g.submit(function() {
                        var l = a.trim(k.val()),
                            o = a.trim(j.val()),
                            n, m;
                        if (i.hasClass("disabled")) {
                            return false;
                        }
                        if (l == "" || o == "") {
                            n = (l == "") ? "请输入用户名" : "请输入密码";
                            f.text(n).show().delay(2000).fadeOut();
                            return false;
                        }
                        i.addClass("disabled").val("登录中");
                        m = {
                            j_username: l,
                            j_password: o,
                            _spring_security_remember_me: "on"
                        };
                        a.ajax({
                            url: "/j_spring_security_check",
                            type: "post",
                            data: m,
                            dataType: "json",
                            success: function(p) {
                                if (p.status == 1) {
                                    location.href = e;
                                } else {
                                    if (p.status == 0) {
                                        i.removeClass("disabled").val("登 录");
                                        f.text("您输入的密码和用户名不匹配").show().delay(2000).fadeOut();
                                        h.addClass("params_error");
                                    }
                                }
                            },
                            error: function(p) {
                                if (p.status == 200) {
                                    location.reload();
                                } else {
                                    i.removeClass("disabled").val("登 录");
                                    NALA.dialog.warn("服务器忙，请稍后再试。(" + p.status + ")");
                                }
                            }
                        });
                        return false;
                    });
                    a.ajax({
                        url: "/user/ajaxUnionLoginFilter"
                    });
                }
            });
            var d = '<div style="width:360px; text-indent: 2em; font-size: 14px; margin-bottom: 10px;">因淘宝联合登录故障，新用户请选择其他方式登录，老会员请联系客服取回您的淘宝联合登录账号。对您造成的不便，多美表示抱歉。</div><p style="text-align: center;"><a href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzgwMDA0MjIzN181OTY5N184MDAwNDIyMzdfMl8" class="graybtn" target="_blank"><i class="iconfont" style="color:#f70; font-size:14px;">&#54;</i> 点此咨询客服</a></p>';
            a("#tb-login").on("click", function() {
                NALA.dialog.creat({
                    id: "tblogin-error",
                    title: "登录故障",
                    content: d
                });
                return false;
            });
        }
    };
})(jQuery);
$(function() {
    var a = NALA.common;
    a.showLoginInfo();
    a.head_cart_event();
    a.mainNav_animate();
    a.searchBar();
    a.lazyload();
    a.toolBar();
});
